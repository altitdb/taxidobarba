{"version":3,"sources":["./src/app/traffic-ticket/modal/modal.page.html","./src/app/traffic-ticket/traffic-ticket.page.html","./src/app/traffic-ticket/modal/modal.module.ts","./src/app/traffic-ticket/modal/modal.page.scss","./src/app/traffic-ticket/modal/modal.page.ts","./src/app/traffic-ticket/traffic-ticket.module.ts","./src/app/traffic-ticket/traffic-ticket.page.scss","./src/app/traffic-ticket/traffic-ticket.page.ts","./src/app/traffic-ticket/traffic-ticket.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,6YAA8U,UAAU,8C;;;;;;;;;;;;ACAvW;AAAe,ggBAAic,SAAS,KAAK,WAAW,6OAA6O,SAAS,KAAK,WAAW,8uB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAtsB;AACM;AACF;AAEA;AAEJ;AAUzC;IAAA;IAA8B,CAAC;IAAlB,eAAe;QAR3B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;aACZ;YACD,YAAY,EAAE,CAAC,qDAAS,CAAC;SAC1B,CAAC;OACW,eAAe,CAAG;IAAD,sBAAC;CAAA;AAAH;;;;;;;;;;;;;AChB5B;AAAe,6GAA8C,uJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAX;AACU;AAO5D;IAIE,mBAAY,SAAoB,EAAU,gBAAiC;QAAjC,qBAAgB,GAAhB,gBAAgB,CAAiB;QACzE,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC;IACjC,CAAC;IAED,4BAAQ,GAAR;IACA,CAAC;IAEY,yBAAK,GAAlB;;;;;4BACgB,qBAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE;;wBAA5C,KAAK,GAAG,SAAoC;wBAClD,KAAK,CAAC,OAAO,EAAE,CAAC;;;;;KACjB;;gBAVsB,wDAAS;gBAA4B,8DAAe;;IAJhE,SAAS;QALrB,+DAAS,CAAC;YACT,QAAQ,EAAE,WAAW;YACrB,kLAAgC;;SAEjC,CAAC;yCAKuB,wDAAS,EAA4B,8DAAe;OAJhE,SAAS,CAerB;IAAD,gBAAC;CAAA;AAfqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRmB;AACM;AACS;AACU;AACX;AACV;AAEa;AACM;AACZ;AACM;AAEX;AACQ;AAEvD,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sEAAiB;KAC7B;CACF,CAAC;AAgBF;IAAA;IAAuC,CAAC;IAA3B,uBAAuB;QAdnC,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;gBAC7B,kEAAmB;gBACnB,qEAAgB;gBAChB,oEAAe;aAChB;YACD,YAAY,EAAE,CAAC,sEAAiB,CAAC;YACjC,SAAS,EAAE,CAAC,4EAAoB,EAAE,+DAAU,EAAE,qEAAa,CAAC;YAC5D,eAAe,EAAE,CAAC,4DAAS,CAAC;SAC7B,CAAC;OACW,uBAAuB,CAAI;IAAD,8BAAC;CAAA;AAAJ;;;;;;;;;;;;;ACpCpC;AAAe,6GAA8C,2J;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAX;AACkB;AACV;AACN;AACnB;AACgB;AACF;AACE;AACe;AACO;AAMvE;IAAuC,qCAAkB;IAOvD,2BACS,cAA6B,EAC7B,WAAuB,EACtB,YAAyB,EACzB,qBAA2C,EAC3C,gBAAiC,EACjC,MAAsB;QANhC,YAQE,kBAAM,cAAc,EAAE,WAAW,CAAC,SACnC;QARQ,oBAAc,GAAd,cAAc,CAAe;QAC7B,iBAAW,GAAX,WAAW,CAAY;QACtB,kBAAY,GAAZ,YAAY,CAAa;QACzB,2BAAqB,GAArB,qBAAqB,CAAsB;QAC3C,sBAAgB,GAAhB,gBAAgB,CAAiB;QACjC,YAAM,GAAN,MAAM,CAAgB;;IAGhC,CAAC;IAED,oCAAQ,GAAR;QACE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;YAClC,OAAO,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,EAAE,yDAAU,CAAC,QAAQ,CAAC;YACxD,MAAM,EAAE,CAAC,IAAI,EAAE,yDAAU,CAAC,QAAQ,CAAC;YACnC,GAAG,EAAE,CAAC,IAAI,EAAE,yDAAU,CAAC,QAAQ,CAAC;YAChC,KAAK,EAAE,CAAC,IAAI,EAAE,yDAAU,CAAC,QAAQ,CAAC;YAClC,MAAM,EAAE,CAAC,IAAI,EAAE,yDAAU,CAAC,QAAQ,CAAC;SACpC,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,sCAAU,GAAV;QAAA,iBAcC;QAbC,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACjD,IAAI,EAAE,KAAK,IAAI,EAAE;YACf,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,aAAG;gBAC/C,KAAI,CAAC,IAAI,CAAC,UAAU,CAAC;oBACnB,OAAO,EAAE,GAAG,CAAC,OAAO;oBACpB,MAAM,EAAE,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC;oBACrC,GAAG,EAAE,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC;oBAC/B,KAAK,EAAE,GAAG,CAAC,KAAK;oBAChB,SAAS,EAAE,GAAG,CAAC,SAAS;oBACxB,MAAM,EAAE,GAAG,CAAC,MAAM;iBACnB,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAED,wCAAY,GAAZ,UAAa,MAAM;QACjB,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,IAAI,CAAC;SACb;QACD,OAAO,MAAM,CAAC,EAAE,CAAC;IACnB,CAAC;IAED,gCAAI,GAAJ;QAAA,iBAQC;QAPC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,mCAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC/E,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,UAAC,MAAW;YACrE,KAAI,CAAC,YAAY,CAAC,oBAAoB,CAAC,CAAC;YACxC,KAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;QACpB,CAAC,EAAE,UAAC,MAAW;YACb,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAEK,wCAAY,GAAlB,UAAmB,QAAgB;;;;;4BACnB,qBAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC;4BAC/C,SAAS,EAAE,2DAAS;4BACpB,cAAc,EAAE,EAAE,QAAQ,YAAE;yBAC7B,CAAC;;wBAHI,KAAK,GAAG,SAGZ;wBACK,qBAAM,KAAK,CAAC,OAAO,EAAE;4BAA5B,sBAAO,SAAqB,EAAC;;;;KAC9B;;gBA9DwB,qEAAa;gBAChB,+DAAU;gBACR,0DAAW;gBACF,4EAAoB;gBACzB,8DAAe;gBACzB,8DAAc;;IAbrB,iBAAiB;QAL7B,+DAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;YAC9B,8LAAyC;;SAE1C,CAAC;yCASyB,qEAAa;YAChB,+DAAU;YACR,0DAAW;YACF,4EAAoB;YACzB,8DAAe;YACzB,8DAAc;OAbrB,iBAAiB,CAwE7B;IAAD,wBAAC;CAAA,CAxEsC,kFAAkB,GAwExD;AAxE6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfa;AACoB;AACJ;AAK3D;IAKE,8BAAoB,WAAuB;QAAvB,gBAAW,GAAX,WAAW,CAAY;QAH3C,QAAG,GAAG,wEAAW,CAAC,OAAO,GAAG,wBAAwB,CAAC;IAGN,CAAC;IAEhD,mCAAI,GAAJ,UAAK,IAAI;QACP,IAAM,OAAO,GAAG,IAAI,gEAAW,EAAE,CAAC,GAAG,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;QAC1E,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE;YAC3C,OAAO,EAAE,OAAO;SACjB,CAAC,CAAC;IACL,CAAC;IAED,qCAAM,GAAN;QACE,IAAM,OAAO,GAAG,IAAI,gEAAW,EAAE,CAAC,GAAG,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;QAC1E,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAwB,KAAG,IAAI,CAAC,GAAK,EAAE;YAChE,OAAO,EAAE,OAAO;SACjB,CAAC,CAAC;IACL,CAAC;;gBAdgC,+DAAU;;IALhC,oBAAoB;QAHhC,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;yCAMiC,+DAAU;OALhC,oBAAoB,CAoBhC;IAAD,2BAAC;CAAA;AApBgC","file":"traffic-ticket-traffic-ticket-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n    </ion-buttons>\\n    <ion-title>\\n      Taxi do Barba\\n    </ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"close()\\\">Fechar</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-item>\\n    <ion-label>{{response}}</ion-label>\\n  </ion-item>\\n</ion-content>\\n\"","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Taxi do Barba\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [formGroup]=\\\"form\\\">\\n  \\n  <ion-item>\\n    <ion-label>Motorista</ion-label>\\n    <ion-select placeholder=\\\"Selecione\\\" formControlName=\\\"driver\\\">\\n      <ion-select-option *ngFor=\\\"let item of drivers\\\" value=\\\"{{item.id}}\\\">{{item.name}}</ion-select-option>\\n    </ion-select>\\n  </ion-item>\\n\\n  <ion-item>\\n    <ion-label>Carro</ion-label>\\n    <ion-select placeholder=\\\"Selecione\\\" formControlName=\\\"car\\\">\\n      <ion-select-option *ngFor=\\\"let item of cars\\\" value=\\\"{{item.id}}\\\">{{item.name}}</ion-select-option>\\n    </ion-select>\\n  </ion-item>\\n\\n  <ion-item>\\n    <ion-label>Valor</ion-label>\\n    <ion-input type=\\\"number\\\" formControlName=\\\"value\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-item>\\n    <ion-label>Data de Vencimento</ion-label>\\n    <ion-datetime\\n      display-format=\\\"DD/MM/YYYY\\\"\\n      picker-format=\\\"DD/MM/YYYY\\\"\\n      formControlName=\\\"dueDate\\\"\\n    ></ion-datetime>\\n  </ion-item>\\n\\n  <ion-item>\\n    <ion-label>Pontos</ion-label>\\n    <ion-input type=\\\"number\\\" formControlName=\\\"points\\\"></ion-input>\\n  </ion-item>\\n\\n  <ion-item>\\n    <ion-button (click)=\\\"form.reset()\\\">Limpar</ion-button>\\n    <ion-button (click)=\\\"save()\\\" [disabled]=\\\"!form.valid\\\">Salvar</ion-button>\\n  </ion-item>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ModalPage } from './modal.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n  ],\n  declarations: [ModalPage]\n})\nexport class ModalPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3RyYWZmaWMtdGlja2V0L21vZGFsL21vZGFsLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { NavParams, ModalController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-modal',\n  templateUrl: './modal.page.html',\n  styleUrls: ['./modal.page.scss'],\n})\nexport class ModalPage implements OnInit {\n\n  response: any;\n\n  constructor(navParams: NavParams, private _modalController: ModalController) { \n    this.response = navParams.data;\n  }\n  \n  ngOnInit() {\n  }\n\n  public async close() {\n    const modal = await this._modalController.getTop();\n    modal.dismiss();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from \"@angular/common/http\";\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\n\nimport { TrafficTicketPage } from './traffic-ticket.page';\nimport { TrafficTicketService } from './traffic-ticket.service';\nimport { CarService } from '../service/car.service';\nimport { DriverService } from '../service/driver.service';\n\nimport { ModalPage } from \"./modal/modal.page\";\nimport { ModalPageModule } from \"./modal/modal.module\";\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TrafficTicketPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ReactiveFormsModule,\n    HttpClientModule,\n    ModalPageModule\n  ],\n  declarations: [TrafficTicketPage],\n  providers: [TrafficTicketService, CarService, DriverService],\n  entryComponents: [ModalPage]\n})\nexport class TrafficTicketPageModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3RyYWZmaWMtdGlja2V0L3RyYWZmaWMtdGlja2V0LnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from \"@angular/core\";\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\nimport { DriverService } from \"../service/driver.service\";\nimport { CarService } from \"../service/car.service\";\nimport * as moment from \"moment\";\nimport { ModalController } from \"@ionic/angular\";\nimport { ModalPage } from \"./modal/modal.page\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { TrafficTicketService } from \"./traffic-ticket.service\";\nimport { CommonCashRegister } from \"../page/common-cash-register.page\";\n@Component({\n  selector: 'app-traffic-ticket',\n  templateUrl: './traffic-ticket.page.html',\n  styleUrls: ['./traffic-ticket.page.scss'],\n})\nexport class TrafficTicketPage extends CommonCashRegister implements OnInit {\n\n  drivers: Array<Driver>;\n  cars: Array<Car>;\n  form: FormGroup;\n  response: String;\n\n  constructor(\n    public _driverService: DriverService,\n    public _carService: CarService,\n    private _formBuilder: FormBuilder,\n    private _trafficTicketService: TrafficTicketService,\n    private _modalController: ModalController,\n    private _route: ActivatedRoute\n  ) {\n    super(_driverService, _carService);\n  }\n\n  ngOnInit() {\n    this.form = this._formBuilder.group({\n      dueDate: [new Date().toISOString(), Validators.required],\n      driver: [null, Validators.required],\n      car: [null, Validators.required],\n      value: [null, Validators.required],\n      points: [null, Validators.required]\n    });\n    this.getDrivers();\n    this.getCars();\n    this.updateForm();\n  }\n\n  updateForm() {\n    let id = this._route.snapshot.paramMap.get(\"id\");\n    if (id !== null) {\n      this._trafficTicketService.getAll().subscribe(suc => {\n        this.form.patchValue({\n          dueDate: suc.dueDate,\n          driver: this.formatObject(suc.driver),\n          car: this.formatObject(suc.car),\n          value: suc.value,\n          paidValue: suc.paidValue,\n          status: suc.status\n        });\n      });\n    }\n  }\n\n  formatObject(object) {\n    if (object === null) {\n      return null;\n    }\n    return object.id;\n  }\n\n  save() {\n    this.form.value.dueDate = moment(this.form.value.dueDate).format(\"YYYY-MM-DD\");\n    this._trafficTicketService.save(this.form.value).subscribe((result: any) => {\n      this.presentModal(\"Salvo com sucesso!\");\n      this.form.reset();\n    }, (result: any) => {\n      this.presentModal(result.error.message);\n    });\n  }\n\n  async presentModal(response: String) {\n    const modal = await this._modalController.create({\n      component: ModalPage,\n      componentProps: { response }\n    });\n    return await modal.present();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TrafficTicketService {\n\n  url = environment.baseUrl + '/api/v1/traffic-ticket';\n  mensagem: String;\n\n  constructor(private _httpClient: HttpClient) { }\n\n  save(data) {\n    const HEADERS = new HttpHeaders().set('Content-Type', 'application/json');\n    return this._httpClient.post(this.url, data, {\n      headers: HEADERS\n    });\n  }\n\n  getAll() {\n    const HEADERS = new HttpHeaders().set('Content-Type', 'application/json');\n    return this._httpClient.get<TrafficTicketResponse>(`${this.url}`, {\n      headers: HEADERS\n    });\n  }\n}\n"],"sourceRoot":"webpack:///"}